<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>We'll Be Right Back</title>
  <meta name="theme-color" content="#247182" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
  <link rel="icon" href="https://cdn.glitch.global/e4de5d14-3ef6-4ed4-b41e-1647325d8269/icon-192x192.png" />
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: 'Poppins', sans-serif;
      background-color: #f0f4f8;
      color: #333;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      text-align: center;
    }

    .container {
      background: white;
      padding: 2rem 2.5rem;
      border-radius: 24px;
      box-shadow: 0 10px 24px rgba(0, 0, 0, 0.1);
      max-width: 480px;
      width: 90%;
      margin-top: 2rem;
      animation: fadeIn 0.6s ease;
    }

    .logo {
      width: 72px;
      height: 72px;
      margin-bottom: 1rem;
      border-radius: 50%;
      transition: transform 0.3s ease;
    }

    .logo:hover {
      transform: scale(1.05);
    }

    h1 {
      font-size: 1.9rem;
      color: #247182;
      margin-bottom: 0.5rem;
    }

    p {
      font-size: 1rem;
      line-height: 1.5;
      color: #444;
    }

    .small {
      margin-top: 1rem;
      font-size: 0.85rem;
      color: #888;
    }

    #status-container {
      width: 100%;
      max-width: 800px;
      margin-top: 2rem;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>
  <div class="container">
    <img src="https://cdn.glitch.global/e4de5d14-3ef6-4ed4-b41e-1647325d8269/icon-192x192.png" alt="Reading Challenge Logo" class="logo" />
    <h1>We'll Be Right Back</h1>
    <p>Our 2025 Reading Challenge website is currently undergoing maintenance or experiencing a temporary outage.</p>
    <p>Weâ€™re working to resolve this quickly. Thanks for your patience!</p>
    <p class="small">Need help? <a href="mailto:support@readingchallenge.online">support@readingchallenge.online</a></p>
  </div>

  <div id="status-container"></div>

  <script>
    const CONFIG = {
      autoHideAfterDays: 2,
      statusPageUrl: 'https://readingchallenge.statuspage.io',
      showOperational: true,
      showTimestamp: true,
      hideTimestampOnIncident: true,
      trackedComponents: ["2025 Reading Challenge"],
      refreshInterval: 90000
    };

    function createStatusWidget() {
      const status = document.createElement('div');
      status.className = 'status-widget loading';
      const externalBtn = document.createElement('div');
      externalBtn.className = 'icon-btn external-btn';
      externalBtn.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>';
      externalBtn.onclick = (e) => { e.stopPropagation(); window.open(CONFIG.statusPageUrl, '_blank'); };
      const extTooltip = document.createElement('div');
      extTooltip.className = 'tooltip more-info';
      extTooltip.innerText = 'More Info';
      externalBtn.appendChild(extTooltip);
      const message = document.createElement('div');
      message.className = 'message';
      message.innerText = 'Loading status...';
      const component = document.createElement('div');
      component.className = 'component';
      component.innerText = '';
      const timestamp = document.createElement('div');
      timestamp.className = 'timestamp';
      timestamp.innerText = '';
      status.append(externalBtn, message, component, timestamp);
      document.getElementById('status-container').appendChild(status);
      setTimeout(() => status.classList.add('loaded'), 50);
      return { status, message, component, timestamp };
    }

    const widget = createStatusWidget();

    async function loadStatus() {
      const now = new Date();
      let affectedComponents = [];
      let latestUpdateTime = null;
      try {
        const incidentResponse = await fetch('https://readingchallenge.statuspage.io/api/v2/incidents.json');
        const incidents = (await incidentResponse.json()).incidents || [];
        if (incidents.length > 0) latestUpdateTime = new Date(incidents[0].updated_at);
        const componentsResponse = await fetch('https://readingchallenge.statuspage.io/api/v2/components.json');
        const components = (await componentsResponse.json()).components || [];
        components.forEach(comp => {
          if (CONFIG.trackedComponents.includes(comp.name) && comp.status !== "operational") {
            affectedComponents.push(comp.name);
          }
        });

        if (affectedComponents.length === 0 && latestUpdateTime && (now - latestUpdateTime) / (1000 * 60 * 60 * 24) >= CONFIG.autoHideAfterDays) {
          widget.status.style.display = 'none';
          return;
        }

        if (affectedComponents.length === 0) {
          widget.status.className = 'status-widget operational loaded';
          widget.message.innerText = "All Systems Operational";
          widget.component.innerText = "";
        } else {
          const affectedName = affectedComponents[0];
          const affectedComp = components.find(c => c.name === affectedName);
          if (!affectedComp) return;
          widget.status.className = 'status-widget ' + affectedComp.status + ' loaded';
          widget.message.innerText = affectedComp.status.replace(/_/g, ' ').replace(/\b\w/g, l => l.toUpperCase());
          widget.component.innerText = affectedName;
        }

        if (CONFIG.showTimestamp) {
          widget.timestamp.innerText = "Last Updated: " + now.toLocaleString([], { dateStyle: 'medium', timeStyle: 'short' });
        }
      } catch (e) {
        console.error("Error loading status", e);
        widget.message.innerText = "Error loading status.";
      }
    }

    loadStatus();
    setInterval(loadStatus, CONFIG.refreshInterval);
  </script>
</body>
</html>
